language: python
python:
- 2.7
- 3.4
- 3.5
- 3.6
before_install:
- if [[ $TRAVIS_PYTHON_VERSION == "2.7" ]] || [[ $TRAVIS_PYTHON_VERSION == "3.5" ]];
  then export DO_COVERAGE=1; fi
- if [[ "$TRAVIS_EVENT_TYPE" = "cron" ]]; then unset DO_COVERAGE; fi
install:
- pip install -U -r requirements.txt
- if [[ $DO_COVERAGE ]]; then pip install coveralls; fi
before_script:
- ".travis/prep_regular.sh"
- if [[ "$TRAVIS_EVENT_TYPE" = "cron" ]]; then .travis/prep_cron.sh; fi
script:
- if ! [[ $DO_COVERAGE ]]; then python setup.py test; fi
- if [[ $DO_COVERAGE ]]; then coverage run --source=fprettify setup.py test; fi
after_success:
- if [[ $DO_COVERAGE ]]; then coveralls; fi
deploy:
  provider: pypi
  user: pseewald
  password:
    secure: B6BXh1e4XCcgFtFR5Up9a7evJQ8LrmhT7CctA8Kw5RVR3oFFoz/4R3MazDMYBBN5K3gYqs9vTnTcJqV408GJV3Ghm/EAAxWHE92HEnKGNQNNWlafQ6usqT2HY7CW8x5k11l8nTq4Zf2Wr4UxcX5QxghLoB0dfgF1aHzggYInJf9Es0qUoi55N3VFlDQBIKYf9s9sVSDMsr/ORNk58WzN5my9tAzD7AkFkPT4HWa3VrDIwk70MmfCyIziUHUQXPIBrUf6TOY8/93Um7IjGhI07CFNzF55sIz6CeSI2EoWfMxv0OUP2M7Xup5M+rI1j4exi+cZ6Qz8k9EdP0fd7Gnm3rRGSLtJqo9eIuZA3wJdhWeuFL1ihavfG7h75CNz53yHmViY52GAJC/ruPsjSuu9iwmD32/8JUf7Jgkd9uOfswjcth10pvMrpW4ZFQsrazbuQlz6M1WODn9Zt/QXyStsZGzuN/t2drN6xT54R1H0WmIQp/xW18fOYPkOxCn0hx1ve8ToIp2/licbd4xGiQWhsx0REE55qfZO6Sb343jE1lQvHmeY2ChsEF8t5l43Za94sv/p2rCq7pdMBS5Ai7rZt5FJkZ39wv8Ao/Irs3BRgxbpE+J6LPhd6Lc/2Szl0GEk9b2KGan9YaRmmoW+ffiDUKdQEnJXU4hzc2GaGVV56II=
  on:
    tags: true
    python: 3.6
